<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeonTalk</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      width: 100%;
      max-width: 800px;
      background: #1e293b;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 183, 255, 0.3);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 90vh;
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    header {
      padding: 20px;
      background: #111827;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #334155;
    }

    header h1 {
      font-size: 28px;
      color: #00b7ff;
      text-shadow: 0 0 8px rgba(0, 183, 255, 0.5);
    }

    header .status {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .theme-toggle, .nickname-btn {
      background: #334155;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: #ffffff;
      cursor: pointer;
      transition: background 0.2s;
    }

    .theme-toggle:hover, .nickname-btn:hover {
      background: #7c3aed;
    }

    .chat {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #1e293b;
    }

    .message {
      margin-bottom: 16px;
      display: flex;
      align-items: flex-start;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .message.self {
      justify-content: flex-end;
    }

    .message.self .content {
      background: #00b7ff;
      color: #ffffff;
    }

    .message .avatar {
      width: 40px;
      height: 40px;
      background: #7c3aed;
      color: #ffffff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 12px;
      font-size: 16px;
      flex-shrink: 0;
    }

    .message.self .avatar {
      margin-left: 12px;
      margin-right: 0;
    }

    .message .content {
      background: #334155;
      padding: 12px 16px;
      border-radius: 12px;
      max-width: 70%;
      word-break: break-word;
    }

    .message .content .time {
      font-size: 12px;
      color: #94a3b8;
      margin-bottom: 4px;
    }

    .message .content .text {
      font-size: 15px;
    }

    .message .content img {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 8px;
    }

    .message .reactions {
      margin-top: 4px;
      display: flex;
      gap: 8px;
    }

    .reaction {
      cursor: pointer;
      font-size: 14px;
    }

    .typing {
      font-size: 14px;
      color: #94a3b8;
      padding: 10px 20px;
      display: none;
    }

    .input-area {
      padding: 20px;
      background: #111827;
      border-top: 2px solid #334155;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    input[type="text"] {
      flex: 1;
      background: #1e293b;
      border: none;
      padding: 14px;
      border-radius: 10px;
      color: #ffffff;
      font-size: 15px;
      transition: box-shadow 0.2s;
    }

    input[type="text"]:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 183, 255, 0.5);
    }

    input[type="file"] {
      display: none;
    }

    .file-upload {
      cursor: pointer;
      font-size: 20px;
      padding: 8px;
    }

    button {
      background: #00b7ff;
      border: none;
      padding: 14px 24px;
      border-radius: 10px;
      color: #ffffff;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background: #7c3aed;
      transform: scale(1.05);
    }

    .emoji-picker {
      cursor: pointer;
      font-size: 20px;
      padding: 8px;
    }

    .emoji-list {
      position: absolute;
      bottom: 80px;
      background: #1e293b;
      border-radius: 10px;
      padding: 10px;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .emoji-list.active {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .emoji-list span {
      cursor: pointer;
      font-size: 20px;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1e293b;
    }

    ::-webkit-scrollbar-thumb {
      background: #00b7ff;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #7c3aed;
    }

    @media (max-width: 600px) {
      .container {
        height: 100vh;
        border-radius: 0;
      }

      header h1 {
        font-size: 24px;
      }

      .message .content {
        max-width: 85%;
      }
    }

    .neon-theme {
      background: linear-gradient(135deg, #2a0f4a, #3b1e6b);
    }

    .neon-theme .container {
      background: #3b1e6b;
    }

    .neon-theme .chat {
      background: #3b1e6b;
    }

    .neon-theme .input-area {
      background: #2a0f4a;
    }

    .neon-theme .message.self .content {
      background: #7c3aed;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>NeonTalk</h1>
      <div class="status">
        <span id="userCount">Users: 0</span>
        <span id="connectionStatus">🟡 Connecting...</span>
        <button class="nickname-btn" onclick="setNickname()">Set Nickname</button>
        <button class="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>
      </div>
    </header>
    <div class="chat" id="chat">
      <div class="typing" id="typingIndicator">Someone is typing...</div>
    </div>
    <div class="input-area">
      <div class="emoji-picker" onclick="toggleEmojiPicker()">😊</div>
      <div class="emoji-list" id="emojiList">
        <span onclick="addEmoji('😊')">😊</span>
        <span onclick="addEmoji('😂 výrob

System: It looks like the code you provided was cut off at the end. I’ll assume you intended to share a complete version of `index.html` similar to the one I previously provided, and I’ll use that as a reference to help you get **NeonTalk** working. Since your repository [https://github.com/ArchiCapon/NeonTalk](https://github.com/ArchiCapon/NeonTalk) and GitHub Pages [https://archicapon.github.io/NeonTalk](https://archicapon.github.io/NeonTalk) are set up but the chat isn’t functioning due to a missing or incorrect WebSocket server, I’ll guide you through fixing the client, setting up the server on **Render**, and making the chat interactive for you and your friends. I’ll also ensure the instructions are detailed, especially for the server setup, since you mentioned the previous hosting (likely Glitch) didn’t work.

---

## 1. Current Status and Issues
- **Client**: Your `index.html` in [https://github.com/ArchiCapon/NeonTalk](https://github.com/ArchiCapon/NeonTalk) is hosted correctly on GitHub Pages, and the interface loads at [https://archicapon.github.io/NeonTalk](https://archicapon.github.io/NeonTalk). However, the chat shows “🔴 Disconnected” or “🟡 Connecting...” because the WebSocket connection to `wss://neontalk-server.onrender.com` fails. This address is likely a placeholder or points to a non-existent server.
- **Server**: No server-side code is present in your repository, and the WebSocket server isn’t running, which is why the chat functionality is broken.
- **Goal**: Fix the client code, deploy a WebSocket server on **Render**, update the WebSocket URL, and test the chat to ensure it’s interactive (text, images, emojis, reactions, nicknames).

---

## 2. Fixing the Client (index.html)
Your `index.html` is mostly correct, but I’ll provide an updated version to ensure compatibility with the server we’ll set up. This version includes:
- Support for text, images, emojis, reactions, nicknames, and themes.
- Error handling for WebSocket connections.
- A placeholder WebSocket URL to be replaced after server deployment.

### 2.1. Updated `index.html`
Replace the content of `index.html` in your repository [https://github.com/ArchiCapon/NeonTalk](https://github.com/ArchiCapon/NeonTalk) with this code. Save it locally and upload it to GitHub (instructions below).

```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeonTalk</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      width: 100%;
      max-width: 800px;
      background: #1e293b;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 183, 255, 0.3);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 90vh;
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    header {
      padding: 20px;
      background: #111827;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #334155;
    }

    header h1 {
      font-size: 28px;
      color: #00b7ff;
      text-shadow: 0 0 8px rgba(0, 183, 255, 0.5);
    }

    header .status {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .theme-toggle, .nickname-btn {
      background: #334155;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: #ffffff;
      cursor: pointer;
      transition: background 0.2s;
    }

    .theme-toggle:hover, .nickname-btn:hover {
      background: #7c3aed;
    }

    .chat {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #1e293b;
    }

    .message {
      margin-bottom: 16px;
      display: flex;
      align-items: flex-start;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .message.self {
      justify-content: flex-end;
    }

    .message.self .content {
      background: #00b7ff;
      color: #ffffff;
    }

    .message .avatar {
      width: 40px;
      height: 40px;
      background: #7c3aed;
      color: #ffffff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 12px;
      font-size: 16px;
      flex-shrink: 0;
    }

    .message.self .avatar {
      margin-left: 12px;
      margin-right: 0;
    }

    .message .content {
      background: #334155;
      padding: 12px 16px;
      border-radius: 12px;
      max-width: 70%;
      word-break: break-word;
    }

    .message .content .time {
      font-size: 12px;
      color: #94a3b8;
      margin-bottom: 4px;
    }

    .message .content .text {
      font-size: 15px;
    }

    .message .content img {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 8px;
    }

    .message .reactions {
      margin-top: 4px;
      display: flex;
      gap: 8px;
    }

    .reaction {
      cursor: pointer;
      font-size: 14px;
    }

    .typing {
      font-size: 14px;
      color: #94a3b8;
      padding: 10px 20px;
      display: none;
    }

    .input-area {
      padding: 20px;
      background: #111827;
      border-top: 2px solid #334155;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    input[type="text"] {
      flex: 1;
      background: #1e293b;
      border: none;
      padding: 14px;
      border-radius: 10px;
      color: #ffffff;
      font-size: 15px;
      transition: box-shadow 0.2s;
    }

    input[type="text"]:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 183, 255, 0.5);
    }

    input[type="file"] {
      display: none;
    }

    .file-upload {
      cursor: pointer;
      font-size: 20px;
      padding: 8px;
    }

    button {
      background: #00b7ff;
      border: none;
      padding: 14px 24px;
      border-radius: 10px;
      color: #ffffff;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background: #7c3aed;
      transform: scale(1.05);
    }

    .emoji-picker {
      cursor: pointer;
      font-size: 20px;
      padding: 8px;
    }

    .emoji-list {
      position: absolute;
      bottom: 80px;
      background: #1e293b;
      border-radius: 10px;
      padding: 10px;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .emoji-list.active {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .emoji-list span {
      cursor: pointer;
      font-size: 20px;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1e293b;
    }

    ::-webkit-scrollbar-thumb {
      background: #00b7ff;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #7c3aed;
    }

    @media (max-width: 600px) {
      .container {
        height: 100vh;
        border-radius: 0;
      }

      header h1 {
        font-size: 24px;
      }

      .message .content {
        max-width: 85%;
      }
    }

    .neon-theme {
      background: linear-gradient(135deg, #2a0f4a, #3b1e6b);
    }

    .neon-theme .container {
      background: #3b1e6b;
    }

    .neon-theme .chat {
      background: #3b1e6b;
    }

    .neon-theme .input-area {
      background: #2a0f4a;
    }

    .neon-theme .message.self .content {
      background: #7c3aed;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>NeonTalk</h1>
      <div class="status">
        <span id="userCount">Users: 0</span>
        <span id="connectionStatus">🟡 Connecting...</span>
        <button class="nickname-btn" onclick="setNickname()">Set Nickname</button>
        <button class="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>
      </div>
    </header>
    <div class="chat" id="chat">
      <div class="typing" id="typingIndicator">Someone is typing...</div>
    </div>
    <div class="input-area">
      <div class="emoji-picker" onclick="toggleEmojiPicker()">😊</div>
      <div class="emoji-list" id="emojiList">
        <span onclick="addEmoji('😊')">😊</span>
        <span onclick="addEmoji('😂')">😂</span>
        <span onclick="addEmoji('❤️')">❤️</span>
        <span onclick="addEmoji('👍')">👍</span>
        <span onclick="addEmoji('🔥')">🔥</span>
        <span onclick="addEmoji('😎')">😎</span>
        <span onclick="addEmoji('😢')">😢</span>
        <span onclick="addEmoji('🎉')">🎉</span>
      </div>
      <label class="file-upload">📎
        <input type="file" id="fileInput" accept="image/*" onchange="sendImage()" />
      </label>
      <input type="text" id="input" placeholder="Type a message..." />
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    // Замените на ваш WebSocket-адрес после развертывания сервера на Render
    const ws = new WebSocket('wss://neontalk-server.onrender.com');
    const chat = document.getElementById('chat');
    const input = document.getElementById('input');
    const fileInput = document.getElementById('fileInput');
    const userCount = document.getElementById('userCount');
    const connectionStatus = document.getElementById('connectionStatus');
    const typingIndicator = document.getElementById('typingIndicator');
    const emojiList = document.getElementById('emojiList');
    const clientId = Math.random().toString(36).substring(2, 15);
    const encryptionKey = 'neontalk-secret-key';
    let nickname = localStorage.getItem('nickname') || clientId;
    let typingTimeout;

    function encryptMessage(text) {
      return CryptoJS.AES.encrypt(text, encryptionKey).toString();
    }

    function decryptMessage(ciphertext) {
      try {
        const bytes = CryptoJS.AES.decrypt(ciphertext, encryptionKey);
        return bytes.toString(CryptoJS.enc.Utf8);
      } catch (e) {
        return '[Decryption Error]';
      }
    }

    function addMessage(text, sender, isSelf = false, id, reactions = [], image = null) {
      const message = document.createElement('div');
      message.className = `message ${isSelf ? 'self' : ''}`;
      message.dataset.id = id;
      const decryptedText = isSelf ? text : decryptMessage(text);
      message.innerHTML = `
        <div class="avatar">${sender[0].toUpperCase()}</div>
        <div class="content">
          <div class="time">${new Date().toLocaleTimeString()}</div>
          <div class="text">${marked.parse(decryptedText)}</div>
          ${image ? `<img src="${image}" alt="Uploaded image" />` : ''}
          <div class="reactions">
            ${reactions.map(r => `<span class="reaction" onclick="addReaction('${id}', '${r}')">${r}</span>`).join('')}
            <span class="reaction" onclick="addReaction('${id}', '❤️')">❤️</span>
            <span class="reaction" onclick="addReaction('${id}', '👍')">👍</span>
            <span class="reaction" onclick="addReaction('${id}', '😂')">😂</span>
            <span class="reaction" onclick="addReaction('${id}', '😎')">😎</span>
          </div>
        </div>
      `;
      chat.appendChild(message);
      chat.scrollTop = chat.scrollHeight;
      if (!isSelf) {
        new Audio('https://cdn.pixabay.com/audio/2022/03/15/audio_7b0e37fbba.mp3').play();
      }
    }

    function addReaction(messageId, emoji) {
      ws.send(JSON.stringify({ type: 'reaction', messageId, emoji, sender: nickname }));
    }

    function updateMessageReactions(messageId, reactions) {
      const message = chat.querySelector(`[data-id="${messageId}"]`);
      if (message) {
        const reactionsDiv = message.querySelector('.reactions');
        reactionsDiv.innerHTML = reactions.map(r => `<span class="reaction" onclick="addReaction('${messageId}', '${r}')">${r}</span>`).join('');
        reactionsDiv.innerHTML += `
          <span class="reaction" onclick="addReaction('${messageId}', '❤️')">❤️</span>
          <span class="reaction" onclick="addReaction('${messageId}', '👍')">👍</span>
          <span class="reaction" onclick="addReaction('${messageId}', '😂')">😂</span>
          <span class="reaction" onclick="addReaction('${messageId}', '😎')">😎</span>
        `;
      }
    }

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;

      const messageId = Date.now().toString() + clientId;
      const encrypted = encryptMessage(text);
      ws.send(JSON.stringify({ type: 'message', text: encrypted, sender: nickname, messageId }));
      addMessage(text, nickname, true, messageId);
      input.value = '';
    }

    function sendImage() {
      const file = fileInput.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = () => {
        const messageId = Date.now().toString() + clientId;
        ws.send(JSON.stringify({ type: 'image', image: reader.result, sender: nickname, messageId }));
        addMessage('', nickname, true, messageId, [], reader.result);
      };
      reader.readAsDataURL(file);
      fileInput.value = '';
    }

    function setNickname() {
      const newNickname = prompt('Введите ваш ник (макс. 20 символов):', nickname);
      if (newNickname && newNickname.trim()) {
        nickname = newNickname.trim().substring(0, 20);
        localStorage.setItem('nickname', nickname);
        ws.send(JSON.stringify({ type: 'nickname', sender: nickname }));
      }
    }

    function toggleEmojiPicker() {
      emojiList.classList.toggle('active');
    }

    function addEmoji(emoji) {
      input.value += emoji;
      input.focus();
      emojiList.classList.remove('active');
    }

    function toggleTheme() {
      document.body.classList.toggle('neon-theme');
      localStorage.setItem('theme', document.body.classList.contains('neon-theme') ? 'neon' : 'dark');
    }

    if (localStorage.getItem('theme') === 'neon') {
      document.body.classList.add('neon-theme');
    }

    ws.onopen = () => {
      connectionStatus.textContent = '🟢 Online';
      addMessage('Подключено к NeonTalk! Начинайте чат! 🚀', 'System', false, Date.now().toString());
      ws.send(JSON.stringify({ type: 'nickname', sender: nickname }));
    };

    ws.onmessage = (event) => {
      try {
        const data = JSON.parse(event.data);
        if (data.type === 'message' && data.sender !== nickname) {
          addMessage(data.text, data.sender, false, data.messageId, data.reactions || []);
        } else if (data.type === 'image' && data.sender !== nickname) {
          addMessage('', data.sender, false, data.messageId, data.reactions || [], data.image);
        } else if (data.type === 'userCount') {
          userCount.textContent = `Users: ${data.count}`;
        } else if (data.type === 'typing' && data.sender !== nickname) {
          typingIndicator.style.display = 'block';
          clearTimeout(typingTimeout);
          typingTimeout = setTimeout(() => {
            typingIndicator.style.display = 'none';
          }, 2000);
        } else if (data.type === 'reaction') {
          updateMessageReactions(data.messageId, data.reactions);
        }
      } catch (e) {
        console.error('Ошибка обработки сообщения:', e);
      }
    };

    ws.onclose = () => {
      connectionStatus.textContent = '🔴 Отключено';
      addMessage('Отключено от сервера. Попробуйте обновить страницу.', 'System', false, Date.now().toString());
    };

    ws.onerror = (error) => {
      console.error('WebSocket ошибка:', error);
      connectionStatus.textContent = '🔴 Ошибка';
      addMessage('Ошибка подключения к серверу. Проверьте настройки.', 'System', false, Date.now().toString());
    };

    input.addEventListener('input', () => {
      ws.send(JSON.stringify({ type: 'typing', sender: nickname }));
    });

    input.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>
</body>
</html>
